---
description: start_api
globs: backend/blank/api/**/*
alwaysApply: false
---
- For FastAPI apps:
   - By convention, all endpoints should be decorated with the response_model and an operation ID (in camel case, e.g. `listEvalIssues`). GET endpoints which return lists/paginated lists should be named as list{plural object in camel case}, for single objects, `read{singular object in camel case}`, e.g. `readEvalIssue`.
   - When declaring endpoint dependencies, use the Annotated syntax, e.g., `db: Annotated[Session, Depends(get_db)]`, NOT the `= Depends(get_db)` default argument syntax.
   - Words in urls should be separated by underscores, not dashes. E.g. `issue_histories` not `issue-histories`.
   - By convention, list endpoints should return a paginated object using the PaginatedBase generic in backend/blank/api/interfaces.py. Here is an example:
```python
@router.get(
    "/tasks", response_model=PaginatedBase[TaskListItem], operation_id="listTasks"
)
def list_tasks(
    db: Annotated[Session, Depends(get_db)],
    project_id: int | None = None,
    search: Annotated[str, Query()] | None = None,
    page: Annotated[int, Query(ge=1)] = 1,
    limit: Annotated[int, Query(ge=1, le=100)] = 50,
):
    query = (
        # omitted
    )

    if project_id is not None:
        ...  # omitted

    if search is not None:
        ...  # omitted

    query = (
       ...  # omitted
    )
    tasks = db.execute(query).scalars().all()

    return PaginatedBase(
        items=tasks,
        total=total,
        page=page,
        size=limit,
    )
```
